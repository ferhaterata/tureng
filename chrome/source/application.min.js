!function(){function a(){this.button=TurengHelper.createElement("button",{"class":b.button}),this.button.style.backgroundImage="url("+c+")",document.body.appendChild(this.button)}var b={button:"translate-button",visible:"visible-translate-button"},c=chrome.extension.getURL("icons/24x24.png");a.prototype.getContext=function(){return this.button},a.prototype.hide=function(){return this.button.classList.remove(b.visible),this},a.prototype.show=function(){return this.button.classList.add(b.visible),this},a.prototype.move=function(a){var b=Array.prototype.slice.call(a).pop(),c=window.scrollY+b.top,d=window.scrollX+b.left+b.width+10,e=this.button.offsetHeight;return e>b.height?c-=Math.round((e-b.height)/2):b.height>e&&(c+=Math.round((b.height-e)/2)),this.button.style.top=c+"px",this.button.style.left=d+"px",this},window.TurengButton=a}(),function(){function a(){this.container=TurengHelper.createElement("div",{"class":b.container})}var b={container:"translate-dialog-container",loading:"translate-dialog-loading",message:"translate-dialog-message"},c=chrome.extension.getURL("images/loading.gif");a.prototype.getContext=function(){return this.container},a.prototype.loading=function(){this.empty();var a=TurengHelper.createElement("img",{"class":b.loading,src:c});return this.container.appendChild(a),this},a.prototype.message=function(a){this.empty();var c=TurengHelper.createElement("strong",{"class":b.message,html:a});return this.container.appendChild(c),this},a.prototype.appendTo=function(a){a.appendChild(this.container)},a.prototype.remove=function(){TurengHelper.removeElement(this.container)},a.prototype.empty=function(){TurengHelper.removeChildren(this.container)},window.TurengDialog=a}(),function(){var a={createElement:function(a,b){var c=document.createElement(a);if(void 0!==b){"html"in b&&(c.innerHTML=b.html,delete b.html);for(var d in b)c.setAttribute(d,b[d])}return c},removeChildren:function(a){for(;a.firstChild;)a.removeChild(a.firstChild);return a},removeElement:function(a){a.parentNode&&a.parentNode.removeChild(a)}};window.TurengHelper=a}(),function(){function a(){this.modal=TurengHelper.createElement("div",{"class":b.modal}),this.header=TurengHelper.createElement("div",{"class":b.header});var a=TurengHelper.createElement("img",{"class":b.image,src:c});this.header.appendChild(a),this.title=TurengHelper.createElement("div",{"class":b.title,html:""}),this.header.appendChild(this.title),this.modal.appendChild(this.header),this.content=TurengHelper.createElement("div",{"class":b.content}),this.modal.appendChild(this.content)}var b={modal:"translate-modal-container",header:"translate-modal-header",content:"translate-modal-content",image:"translate-modal-image",title:"translate-modal-title"},c=chrome.extension.getURL("images/tureng.png");a.prototype.getContext=function(){return this.modal},a.prototype.renderTitle=function(a,b){this.title.innerHTML="&ldquo;"+a+"&rdquo; teriminin sözlükteki anlamları: "+b+" sonuç"},a.prototype.renderRow=function(a,b){var c=TurengHelper.createElement("div",{"class":"translate-table-row"}),a=TurengHelper.createElement("div",{"class":"translate-order-column",html:a});c.appendChild(a);var d=TurengHelper.createElement("div",{"class":"translate-first-column",html:b.first});c.appendChild(d);var e=TurengHelper.createElement("div",{"class":"translate-second-column",html:b.second});c.appendChild(e);var f=TurengHelper.createElement("div",{"class":"translate-purpose-column",html:b.purpose});return c.appendChild(f),c},a.prototype.renderContent=function(a){var b=this;a.forEach(function(a){var c=0,d=TurengHelper.createElement("div",{"class":"translate-table-container"});for(var e in a){var f=TurengHelper.createElement("div",{"class":"translate-table-header",html:e});d.appendChild(f);var g=TurengHelper.createElement("div",{"class":"translate-table-content"});d.appendChild(g),a[e].forEach(function(a){c++,g.appendChild(b.renderRow(c,a))})}b.content.appendChild(d)})},a.prototype.render=function(a,b,c){return this.empty(),this.renderTitle(a,b),this.renderContent(c),this},a.prototype.appendTo=function(a){a.appendChild(this.modal)},a.prototype.remove=function(){TurengHelper.removeElement(this.modal)},a.prototype.empty=function(){TurengHelper.removeChildren(this.title),TurengHelper.removeChildren(this.content)},window.TurengModal=a}(),function(){function a(){this.overlay=TurengHelper.createElement("div",{"class":b.overlay}),this.container=TurengHelper.createElement("div",{"class":b.container}),this.overlay.appendChild(this.container),this.content=TurengHelper.createElement("div",{"class":b.content}),this.container.appendChild(this.content),document.body.appendChild(this.overlay)}var b={overlay:"translate-overlay-wrapper",visible:"visible-translate-overlay-wrapper",container:"translate-overlay-container",content:"translate-overlay-content",body:"translate-overlay-active"};a.prototype.getContext=function(){return this.overlay},a.prototype.getContent=function(){return this.content},a.prototype.hide=function(){return document.body.classList.remove(b.body),this.overlay.classList.remove(b.visible),this},a.prototype.show=function(){return document.body.classList.add(b.body),this.overlay.classList.add(b.visible),this},a.prototype.empty=function(){return TurengHelper.removeChildren(this.content),this},window.TurengOverlay=a}(),function(){function a(){g.empty(),f.empty(),e.empty().hide(),b=!1}var b,c,d=new TurengButton,e=new TurengOverlay,f=new TurengDialog,g=new TurengModal;d.getContext().addEventListener("click",function(){b=!0,d.hide(),e.show(),f.loading().appendTo(e.getContent()),chrome.runtime.sendMessage({selectedText:c},function(a){if(f.remove(),200!==a.status)f.message("Bir şeyler yolunda gitmedi.").appendTo(e.getContent());else{var b=(new DOMParser).parseFromString(a.responseText,"text/html"),d=b.getElementsByClassName("searchResultsTable"),h=0,i=[];Array.prototype.slice.call(d).forEach(function(a){var b={};Array.prototype.slice.call(a.querySelectorAll("tr")).forEach(function(a){var c,d=a.querySelector("td[lang=en]"),e=a.querySelector("td[lang=tr]");if(d&&e){var f=Array.prototype.indexOf.call(d.parentNode.children,d),g=Array.prototype.indexOf.call(e.parentNode.children,e),i={},j=d.querySelector("a");j.setAttribute("target","_blank"),j.setAttribute("href","http://tureng.com"+j.getAttribute("href"));var k=e.querySelector("a");k.setAttribute("target","_blank"),k.setAttribute("href","http://tureng.com"+k.getAttribute("href")),g>f?(c=d.previousElementSibling,i.first=j.outerHTML,i.second=k.outerHTML):(c=e.previousElementSibling,i.first=k.outerHTML,i.second=j.outerHTML),i.purpose=d.querySelector("i").innerText;var l=c.innerText.trim();b.hasOwnProperty(l)||(b[l]=new Array),b[l].push(i),h++}}),i.push(b)}),h?g.render(c,h,i).appendTo(e.getContent()):f.message("Hiçbir sonuç bulunamadı.").appendTo(e.getContent())}})}),e.getContext().addEventListener("click",function(){a()}),g.getContext().addEventListener("click",function(a){a.stopPropagation()}),f.getContext().addEventListener("click",function(a){a.stopPropagation()}),document.addEventListener("mouseup",function(){if(!b){var a=window.getSelection();if(c=a.toString().trim(),c.length){var e=a.getRangeAt(0),f=e.getClientRects();if(f.length)return void d.show().move(f)}d.hide()}}),document.addEventListener("keyup",function(b){b=b||window.event,27==b.keyCode&&a()})}();